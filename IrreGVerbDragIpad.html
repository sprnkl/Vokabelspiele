<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vokabelspiel: Unregelmäßige Verben</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background-color: #f9f9f9;
    }
    h1, h2 {
      text-align: center;
    }
    #progress {
      text-align: center;
      font-weight: bold;
      margin-bottom: 20px;
    }
    /* Container für Drop-Zonen und draggable Elemente */
    #drop-zones, #draggables {
      text-align: center;
      margin-bottom: 20px;
    }
    /* Style für die draggable Wörter */
    .verb {
      background-color: #ffdd57;
      padding: 10px;
      margin: 5px;
      border-radius: 5px;
      cursor: grab;
      display: inline-block;
      text-align: center;
      min-width: 80px;
      border: 1px solid #ccc;
      /* Deaktiviert die native Touch-Geste (z. B. Scrollen) auf dem Element */
      touch-action: none;
    }
    .hidden {
      display: none;
    }
    /* Style für die Drop-Zonen */
    .drop-zone {
      border: 2px dashed #aaa;
      padding: 15px;
      margin: 5px;
      min-width: 120px;
      display: inline-block;
      text-align: center;
    }
    .correct {
      background-color: #4CAF50;
      color: white;
      border: none;
    }
  </style>
</head>
<body>
  <h1>Vokabelspiel: Unregelmäßige Verben</h1>
  <div id="progress"></div>
  <div id="drop-zones"></div>
  <div id="draggables"></div>

  <script>
    // Array mit allen unregelmäßigen Verben
    const verbs = [
      { infinitive: "be",         pastSimple: "was/were",    pastParticiple: "been",         meaning: "sein" },
      { infinitive: "become",     pastSimple: "became",      pastParticiple: "become",       meaning: "werden" },
      { infinitive: "begin",      pastSimple: "began",       pastParticiple: "begun",        meaning: "beginnen, anfangen" },
      { infinitive: "bet",        pastSimple: "bet",         pastParticiple: "bet",          meaning: "wetten" },
      { infinitive: "break",      pastSimple: "broke",       pastParticiple: "broken",       meaning: "brechen, zerbrechen" },
      { infinitive: "bring",      pastSimple: "brought",     pastParticiple: "brought",      meaning: "bringen, mitbringen" },
      { infinitive: "build",      pastSimple: "built",       pastParticiple: "built",        meaning: "bauen" },
      { infinitive: "buy",        pastSimple: "bought",      pastParticiple: "bought",       meaning: "kaufen" },
      { infinitive: "catch",      pastSimple: "caught",      pastParticiple: "caught",       meaning: "fangen, erwischen" },
      { infinitive: "choose",     pastSimple: "chose",       pastParticiple: "chosen",       meaning: "(aus)wählen" },
      { infinitive: "come",       pastSimple: "came",        pastParticiple: "come",         meaning: "kommen" },
      { infinitive: "cost",       pastSimple: "cost",        pastParticiple: "cost",         meaning: "kosten" },
      { infinitive: "creep",      pastSimple: "crept",       pastParticiple: "crept",        meaning: "schleichen, kriechen" },
      { infinitive: "cut",        pastSimple: "cut",         pastParticiple: "cut",          meaning: "schneiden, (Rasen) mähen" },
      { infinitive: "do",         pastSimple: "did",         pastParticiple: "done",         meaning: "tun, machen" },
      { infinitive: "drink",      pastSimple: "drank",       pastParticiple: "drunk",        meaning: "trinken" },
      { infinitive: "drive",      pastSimple: "drove",       pastParticiple: "driven",       meaning: "(mit dem Auto) fahren, (an)treiben" },
      { infinitive: "eat",        pastSimple: "ate",         pastParticiple: "eaten",        meaning: "essen" },
      { infinitive: "fall",       pastSimple: "fell",        pastParticiple: "fallen",       meaning: "fallen, hinfallen" },
      { infinitive: "feed",       pastSimple: "fed",         pastParticiple: "fed",          meaning: "füttern" },
      { infinitive: "feel",       pastSimple: "felt",        pastParticiple: "felt",         meaning: "fühlen; sich fühlen" },
      { infinitive: "fight",      pastSimple: "fought",      pastParticiple: "fought",       meaning: "kämpfen, bekämpfen" },
      { infinitive: "find",       pastSimple: "found",       pastParticiple: "found",        meaning: "finden" },
      { infinitive: "fly",        pastSimple: "flew",        pastParticiple: "flown",        meaning: "fliegen" },
      { infinitive: "forget",     pastSimple: "forgot",      pastParticiple: "forgotten",    meaning: "vergessen" },
      { infinitive: "get",        pastSimple: "got",         pastParticiple: "got",          meaning: "bekommen, holen, werden, (hin)kommen" },
      { infinitive: "give",       pastSimple: "gave",        pastParticiple: "given",        meaning: "geben" },
      { infinitive: "go",         pastSimple: "went",        pastParticiple: "gone",         meaning: "gehen" },
      { infinitive: "grow",       pastSimple: "grew",        pastParticiple: "grown",        meaning: "werden, wachsen" },
      { infinitive: "have",       pastSimple: "had",         pastParticiple: "had",          meaning: "haben" },
      { infinitive: "hear",       pastSimple: "heard",       pastParticiple: "heard",        meaning: "hören" },
      { infinitive: "hit",        pastSimple: "hit",         pastParticiple: "hit",          meaning: "schlagen, treffen; prallen gegen" },
      { infinitive: "hold",       pastSimple: "held",        pastParticiple: "held",         meaning: "halten" },
      { infinitive: "hurt",       pastSimple: "hurt",        pastParticiple: "hurt",         meaning: "verletzen; wehtun" },
      { infinitive: "keep",       pastSimple: "kept",        pastParticiple: "kept",         meaning: "(frei)halten, behalten" },
      { infinitive: "know",       pastSimple: "knew",        pastParticiple: "known",        meaning: "wissen, kennen" },
      { infinitive: "leave",      pastSimple: "left",        pastParticiple: "left",         meaning: "abfahren, weggehen; zurücklassen" },
      { infinitive: "lie",        pastSimple: "lay",         pastParticiple: "lain",         meaning: "liegen" },
      { infinitive: "lose",       pastSimple: "lost",        pastParticiple: "lost",         meaning: "verlieren" },
      { infinitive: "make",       pastSimple: "made",        pastParticiple: "made",         meaning: "machen" },
      { infinitive: "mean",       pastSimple: "meant",       pastParticiple: "meant",        meaning: "bedeuten, meinen; sagen wollen" },
      { infinitive: "meet",       pastSimple: "met",         pastParticiple: "met",          meaning: "treffen; sich treffen; kennenlernen" },
      { infinitive: "pay",        pastSimple: "paid",        pastParticiple: "paid",         meaning: "bezahlen" },
      { infinitive: "put",        pastSimple: "put",         pastParticiple: "put",          meaning: "tun, legen, stellen" },
      { infinitive: "read",       pastSimple: "read",        pastParticiple: "read",         meaning: "lesen" },
      { infinitive: "ride",       pastSimple: "rode",        pastParticiple: "ridden",       meaning: "reiten, (Rad) fahren" },
      { infinitive: "ring",       pastSimple: "rang",        pastParticiple: "rung",         meaning: "läuten, klingen; anrufen" },
      { infinitive: "run",        pastSimple: "ran",         pastParticiple: "run",          meaning: "rennen, laufen" },
      { infinitive: "say",        pastSimple: "said",        pastParticiple: "said",         meaning: "sagen" },
      { infinitive: "see",        pastSimple: "saw",         pastParticiple: "seen",         meaning: "sehen" },
      { infinitive: "sell",       pastSimple: "sold",        pastParticiple: "sold",         meaning: "verkaufen" },
      { infinitive: "send",       pastSimple: "sent",        pastParticiple: "sent",         meaning: "schicken, senden" },
      { infinitive: "shake",      pastSimple: "shook",       pastParticiple: "shaken",       meaning: "schütteln" },
      { infinitive: "shoot",      pastSimple: "shot",        pastParticiple: "shot",         meaning: "erschießen, schießen (auf)" },
      { infinitive: "show off",   pastSimple: "showed off",  pastParticiple: "shown off",    meaning: "angeben (prahlen)" },
      { infinitive: "sing",       pastSimple: "sang",        pastParticiple: "sung",         meaning: "singen" },
      { infinitive: "sit",        pastSimple: "sat",         pastParticiple: "sat",          meaning: "sitzen" },
      { infinitive: "sleep",      pastSimple: "slept",       pastParticiple: "slept",        meaning: "schlafen" },
      { infinitive: "speak",      pastSimple: "spoke",       pastParticiple: "spoken",       meaning: "sprechen" },
      { infinitive: "spend",      pastSimple: "spent",       pastParticiple: "spent",        meaning: "ausgeben (Geld); verbringen (Zeit)" },
      { infinitive: "stand",      pastSimple: "stood",       pastParticiple: "stood",        meaning: "stehen; sich (hin)stellen" },
      { infinitive: "steal",      pastSimple: "stole",       pastParticiple: "stolen",       meaning: "stehlen" },
      { infinitive: "stink",      pastSimple: "stank",       pastParticiple: "stunk",        meaning: "stinken" },
      { infinitive: "swim",       pastSimple: "swam",        pastParticiple: "swum",         meaning: "schwimmen" },
      { infinitive: "take",       pastSimple: "took",        pastParticiple: "taken",        meaning: "nehmen; mitnehmen; dauern, (Zeit) brauchen" },
      { infinitive: "tell",       pastSimple: "told",        pastParticiple: "told",         meaning: "erzählen, berichten" },
      { infinitive: "teach",      pastSimple: "taught",      pastParticiple: "taught",       meaning: "unterrichten, lehren" },
      { infinitive: "think",      pastSimple: "thought",     pastParticiple: "thought",      meaning: "denken" },
      { infinitive: "throw",      pastSimple: "threw",       pastParticiple: "thrown",       meaning: "werfen" },
      { infinitive: "understand", pastSimple: "understood",  pastParticiple: "understood",   meaning: "verstehen" },
      { infinitive: "wear",       pastSimple: "wore",        pastParticiple: "worn",         meaning: "tragen, anhaben (Kleidung)" },
      { infinitive: "win",        pastSimple: "won",         pastParticiple: "won",          meaning: "gewinnen" },
      { infinitive: "write",      pastSimple: "wrote",       pastParticiple: "written",      meaning: "schreiben" }
    ];

    let currentVerbIndex = 0;

    // Lädt ein Verb (alle seine Formen) in die Spieloberfläche
    function loadVerb(index) {
      if (index >= verbs.length) {
        document.getElementById('progress').textContent = "Glückwunsch! Alle Verben wurden abgefragt.";
        document.getElementById('drop-zones').innerHTML = "";
        document.getElementById('draggables').innerHTML = "";
        return;
      }

      const currentVerb = verbs[index];

      // Aktualisiere den Fortschritts-Text
      document.getElementById('progress').textContent = `Verb ${index + 1} von ${verbs.length}`;

      // Leere die Container für Drop-Zonen und draggable Elemente
      const dropZonesContainer = document.getElementById('drop-zones');
      dropZonesContainer.innerHTML = "";
      const draggablesContainer = document.getElementById('draggables');
      draggablesContainer.innerHTML = "";

      // Kategorien (Formen und Bedeutung) mit Beschriftung
      const categories = [
        { key: "infinitive", label: "Infinitiv" },
        { key: "pastSimple", label: "Past Simple" },
        { key: "pastParticiple", label: "Past Participle" },
        { key: "meaning", label: "Bedeutung" }
      ];

      // Erstelle die Drop-Zonen für das aktuelle Verb
      categories.forEach(cat => {
        const dropDiv = document.createElement('div');
        dropDiv.classList.add('drop-zone');
        dropDiv.setAttribute('data-match', cat.key);
        dropDiv.textContent = cat.label;
        dropZonesContainer.appendChild(dropDiv);

        // Für Maus-Events an den Drop-Zonen
        dropDiv.addEventListener('dragover', event => {
          event.preventDefault();
        });
        dropDiv.addEventListener('drop', event => {
          event.preventDefault();
          const dragged = document.querySelector('.dragging');
          if (dragged && dragged.dataset.match === dropDiv.dataset.match) {
            dropDiv.textContent = dragged.textContent;
            dropDiv.classList.add('correct');
            dragged.classList.add('hidden');
            checkCompletion();
          }
        });
      });

      // Erstelle die draggable Elemente (Wortteile) für das aktuelle Verb
      const draggableItems = [
        { text: currentVerb.infinitive,     match: "infinitive" },
        { text: currentVerb.pastSimple,     match: "pastSimple" },
        { text: currentVerb.pastParticiple, match: "pastParticiple" },
        { text: currentVerb.meaning,        match: "meaning" }
      ];

      // Mische die draggable Items zufällig
      shuffle(draggableItems);

      // Füge die Elemente in den Container ein und hänge die Event-Listener an
      draggableItems.forEach(item => {
        const div = document.createElement('div');
        div.classList.add('verb');
        div.setAttribute('draggable', 'true');
        div.setAttribute('data-match', item.match);
        div.textContent = item.text;
        draggablesContainer.appendChild(div);

        // Maus-Events
        div.addEventListener('dragstart', event => {
          event.dataTransfer.setData('text/plain', '');
          div.classList.add('dragging');
        });
        div.addEventListener('dragend', () => {
          div.classList.remove('dragging');
        });
        // Touch-Start: Markiere das Element als "dragging" und setze es absolut
        div.addEventListener('touchstart', event => {
          const touch = event.touches[0];
          div.classList.add('dragging');
          div.style.position = 'absolute';
          div.style.left = `${touch.pageX - div.offsetWidth / 2}px`;
          div.style.top  = `${touch.pageY - div.offsetHeight / 2}px`;
          // Verhindere, dass der Browser hier versucht zu scrollen
          event.preventDefault();
        });
      });
    }

    // Globaler Touch-Move-Listener (wird nur aktiv, wenn ein Element "dragging" ist)
    document.addEventListener('touchmove', event => {
      const dragged = document.querySelector('.dragging');
      if (!dragged) return;
      const touch = event.touches[0];
      dragged.style.left = `${touch.pageX - dragged.offsetWidth / 2}px`;
      dragged.style.top  = `${touch.pageY - dragged.offsetHeight / 2}px`;
    });

    // Globaler Touch-End-Listener: Ermittelt per document.elementFromPoint, ob der Drop erfolgt ist
    document.addEventListener('touchend', event => {
      const dragged = document.querySelector('.dragging');
      if (!dragged) return;
      const touch = event.changedTouches[0];
      const dropElem = document.elementFromPoint(touch.clientX, touch.clientY);
      if (dropElem && dropElem.classList.contains('drop-zone')) {
        if (dragged.dataset.match === dropElem.dataset.match) {
          dropElem.textContent = dragged.textContent;
          dropElem.classList.add('correct');
          dragged.classList.add('hidden');
          checkCompletion();
        }
      }
      // Entferne die Dragging-Klasse und setze die Position zurück
      dragged.classList.remove('dragging');
      dragged.style.position = '';
      dragged.style.left = '';
      dragged.style.top = '';
    });

    // Shuffle-Funktion (Fisher-Yates)
    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    // Überprüft, ob alle Drop-Zonen korrekt gefüllt sind.
    // Wenn ja, wird nach einer kurzen Pause das nächste Verb geladen.
    function checkCompletion() {
      const dropZones = document.querySelectorAll('.drop-zone');
      let allCorrect = true;
      dropZones.forEach(zone => {
        if (!zone.classList.contains('correct')) {
          allCorrect = false;
        }
      });
      if (allCorrect) {
        setTimeout(() => {
          currentVerbIndex++;
          loadVerb(currentVerbIndex);
        }, 1000);
      }
    }

    // Spielstart mit dem ersten Verb
    loadVerb(currentVerbIndex);
  </script>
</body>
</html>
